{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/js/lib/loader/simple-resource-loader.ts","webpack:///./src/js/starter.ts","webpack:///./src/js/lib/resources-loader.ts","webpack:///./src/js/lib/loader/index.ts","webpack:///./src/js/lib/loader/multi-resource-loader.ts","webpack:///./src/js/lib/loader/css-loader.ts","webpack:///./src/js/lib/loader/js-loader.ts"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","default","url","autoLoad","autoAppend","this","_xhr","_url","_listeners","_responseStatus","_responseTextStatus","_responseData","_status","_progress","isAppend","callbackDone","event","status","statusText","responseText","dispatch","callbackFail","callbackProgress","lengthComputable","Math","ceil","loaded","total","callbackAbort","load","push","abort","XMLHttpRequest","onprogress","onerror","onload","onabort","open","send","append","doAppend","__importDefault","mod","resourcesLoader","errorMessage","addResources","__ENV__","resources","loader_1","_elementInDom","_errorShown","_loader","MultiResourceLoader","onUpdate","show","_progressBarElement","setAttribute","progress","error","done","_element","document","createElement","className","box","indicator","appendChild","resource","test","addResourceLoader","JSLoader","CSSLoader","SimpleResourceLoader","body","removeChild","hide","createTextNode","simple_resource_loader_1","multi_resource_loader_1","css_loader_1","js_loader_1","_resourceLoaders","_nbResourceLoaders","resourceLoader","refreshStatus","refreshProgress","refreshNbResourceLoaders","datas","responseData","resourceLoadersByStatus","prevStatus","prevProgress","round","super","arguments","style","head","script","type"],"mappings":"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","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SimpleResourceLoader {\n    constructor(url, autoLoad = true, autoAppend = true) {\n        this._xhr = null;\n        this._url = '';\n        this._listeners = [];\n        this._responseStatus = null;\n        this._responseTextStatus = '';\n        this._responseData = null;\n        this._status = 'waiting';\n        this._progress = 0;\n        this.isAppend = false;\n        this.autoAppend = true;\n        this.callbackDone = (event) => {\n            if (!this._xhr) {\n                return;\n            }\n            this._responseStatus = this._xhr.status;\n            this._responseTextStatus = this._xhr.statusText;\n            this._responseData = this._xhr.responseText;\n            this._progress = 100;\n            this._status = this._xhr.status === 200 ? 'done' : 'error';\n            this._xhr = null;\n            this.dispatch();\n        };\n        this.callbackFail = (event) => {\n            if (!this._xhr) {\n                return;\n            }\n            this._responseStatus = this._xhr.status;\n            this._responseTextStatus = this._xhr.statusText;\n            this._responseData = this._xhr.responseText;\n            this._progress = 100;\n            this._status = 'error';\n            this._xhr = null;\n            this.dispatch();\n        };\n        this.callbackProgress = (event) => {\n            if (event.lengthComputable) {\n                this._progress = Math.ceil(100 * event.loaded / event.total);\n            }\n            this.dispatch();\n        };\n        this.callbackAbort = (event) => {\n            if (!this._xhr) {\n                return;\n            }\n            this._progress = 100;\n            this._status = 'canceled';\n            this._xhr = null;\n            this.dispatch();\n        };\n        this._url = url;\n        this.autoAppend = autoAppend;\n        if (autoLoad) {\n            this.load();\n        }\n    }\n    get status() {\n        return this._status;\n    }\n    get progress() {\n        return this._progress;\n    }\n    get responseStatus() {\n        return this._responseStatus;\n    }\n    get responseTextStatus() {\n        return this._responseTextStatus;\n    }\n    get responseData() {\n        return this._responseData;\n    }\n    onUpdate(c) {\n        this._listeners.push(c);\n    }\n    abort() {\n        if (this._xhr) {\n            this._xhr.abort();\n        }\n    }\n    load() {\n        this.abort();\n        this._status = 'pending';\n        this._xhr = new XMLHttpRequest();\n        this._xhr.onprogress = this.callbackProgress;\n        this._xhr.onerror = this.callbackFail;\n        this._xhr.onload = this.callbackDone;\n        this._xhr.onabort = this.callbackAbort;\n        this._xhr.open('GET', this._url, true);\n        this._xhr.send(null);\n        this.dispatch();\n    }\n    dispatch() {\n        for (let c of this._listeners) {\n            c(this);\n        }\n        if (this.autoAppend && this.status === 'done') {\n            this.append();\n        }\n    }\n    append() {\n        if (this.status !== 'done' || this.isAppend) {\n            return;\n        }\n        this.doAppend();\n        this.isAppend = true;\n    }\n    doAppend() {\n        // Do nothing\n    }\n}\nexports.default = SimpleResourceLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire('../css/starter.scss');\nconst resources_loader_1 = __importDefault(require(\"./lib/resources-loader\"));\nconst resourcesLoader = new resources_loader_1.default();\nresourcesLoader.errorMessage = 'Oups...';\nresourcesLoader.addResources(window.__ENV__.resources);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst loader_1 = require(\"./loader\");\nclass ResourcesLoader {\n    constructor() {\n        this._elementInDom = false;\n        this._errorShown = false;\n        this.errorMessage = null;\n        this._loader = new loader_1.MultiResourceLoader();\n        this._loader.onUpdate((l) => {\n            this.show();\n            if (l.status === 'done') {\n                this.done();\n                return;\n            }\n            else if (l.status === 'error') {\n                this.error();\n                return;\n            }\n            this._progressBarElement.setAttribute('style', `width: ${l.progress}%`);\n        });\n        this._element = document.createElement('div');\n        this._element.className = 'resources-loader-layout';\n        const box = document.createElement('div');\n        box.className = 'resources-loader-box';\n        const indicator = document.createElement('div');\n        indicator.className = 'resources-loader-indicator';\n        const progress = document.createElement('div');\n        progress.className = 'progress resources-loader-progress';\n        this._progressBarElement = document.createElement('div');\n        this._progressBarElement.className = 'progress-bar bg-primary';\n        this._progressBarElement.setAttribute('style', 'width: 0%');\n        progress.appendChild(this._progressBarElement);\n        indicator.appendChild(progress);\n        box.appendChild(indicator);\n        this._element.appendChild(box);\n    }\n    addResources(resources) {\n        for (let key in resources) {\n            let resource = resources[key];\n            if (/\\.js$/.test(resource)) {\n                this._loader.addResourceLoader(key, new loader_1.JSLoader(resource, false, false));\n            }\n            else if (/\\.css$/.test(resource)) {\n                this._loader.addResourceLoader(key, new loader_1.CSSLoader(resource, false, false));\n            }\n            else {\n                this._loader.addResourceLoader(key, new loader_1.SimpleResourceLoader(resource, false, false));\n            }\n        }\n        this._loader.load();\n    }\n    show() {\n        if (this._elementInDom) {\n            return;\n        }\n        document.body.appendChild(this._element);\n        this._elementInDom = true;\n    }\n    hide() {\n        if (!this._elementInDom) {\n            return;\n        }\n        document.body.removeChild(this._element);\n        this._elementInDom = false;\n    }\n    done() {\n        this._loader.append();\n        this.hide();\n    }\n    error() {\n        if (this._errorShown) {\n            return;\n        }\n        this._progressBarElement.setAttribute('style', 'width: 100%');\n        this._progressBarElement.className = 'progress-bar bg-danger';\n        if (this.errorMessage) {\n            this._element.className = this._element.className + ' error';\n            this._progressBarElement.appendChild(document.createTextNode(this.errorMessage));\n        }\n        this._errorShown = true;\n    }\n}\nexports.default = ResourcesLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst simple_resource_loader_1 = __importDefault(require(\"./simple-resource-loader\"));\nexports.SimpleResourceLoader = simple_resource_loader_1.default;\nconst multi_resource_loader_1 = __importDefault(require(\"./multi-resource-loader\"));\nexports.MultiResourceLoader = multi_resource_loader_1.default;\nconst css_loader_1 = __importDefault(require(\"./css-loader\"));\nexports.CSSLoader = css_loader_1.default;\nconst js_loader_1 = __importDefault(require(\"./js-loader\"));\nexports.JSLoader = js_loader_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MultiResourceLoader {\n    constructor() {\n        this._resourceLoaders = {};\n        this._nbResourceLoaders = 0;\n        this._listeners = [];\n        this._status = 'waiting';\n        this._progress = 0;\n    }\n    addResourceLoader(key, resourceLoader) {\n        if (!this._resourceLoaders[key]) {\n            this._resourceLoaders[key] = resourceLoader;\n            resourceLoader.onUpdate((l) => {\n                this.refreshStatus();\n                this.refreshProgress();\n            });\n        }\n        this.refreshNbResourceLoaders();\n    }\n    getResourceLoader(key) {\n        if (this._resourceLoaders[key]) {\n            return this._resourceLoaders[key];\n        }\n        return null;\n    }\n    onUpdate(c) {\n        this._listeners.push(c);\n    }\n    get status() {\n        return this._status;\n    }\n    get progress() {\n        return this._progress;\n    }\n    get responseData() {\n        const datas = {};\n        for (let key in this._resourceLoaders) {\n            datas[key] = this._resourceLoaders[key].responseData;\n        }\n        return datas;\n    }\n    abort() {\n        for (let key in this._resourceLoaders) {\n            this._resourceLoaders[key].abort();\n        }\n    }\n    load() {\n        for (let key in this._resourceLoaders) {\n            if (this._resourceLoaders[key].status !== 'done') {\n                this._resourceLoaders[key].load();\n            }\n        }\n        if (!this._nbResourceLoaders) {\n            this._status = 'done';\n            this.dispatch();\n        }\n    }\n    append() {\n        for (let key in this._resourceLoaders) {\n            this._resourceLoaders[key].append();\n        }\n    }\n    dispatch() {\n        for (let c of this._listeners) {\n            c(this);\n        }\n    }\n    refreshStatus() {\n        const resourceLoadersByStatus = {\n            'waiting': 0,\n            'pending': 0,\n            'canceled': 0,\n            'error': 0,\n            'done': 0\n        };\n        for (let key in this._resourceLoaders) {\n            resourceLoadersByStatus[this._resourceLoaders[key].status]++;\n        }\n        let prevStatus = this._status;\n        if (resourceLoadersByStatus['error'] > 0) {\n            this._status = 'error';\n        }\n        else if (resourceLoadersByStatus['done'] === this._nbResourceLoaders) {\n            this._status = 'done';\n        }\n        else if (resourceLoadersByStatus['canceled'] === this._nbResourceLoaders) {\n            this._status = 'canceled';\n        }\n        else if (resourceLoadersByStatus['pending'] > 0) {\n            this._status = 'pending';\n        }\n        else {\n            this._status = 'waiting';\n        }\n        if (prevStatus !== this._status) {\n            this.dispatch();\n        }\n    }\n    refreshProgress() {\n        let prevProgress = this._progress;\n        if (!this._nbResourceLoaders) {\n            this._progress = 100;\n        }\n        else {\n            let progress = 0;\n            for (let key in this._resourceLoaders) {\n                progress += this._resourceLoaders[key].progress;\n            }\n            this._progress = Math.round(progress / this._nbResourceLoaders);\n        }\n        if (prevProgress !== this._progress) {\n            this.dispatch();\n        }\n    }\n    refreshNbResourceLoaders() {\n        this._nbResourceLoaders = 0;\n        for (let key in this._resourceLoaders) {\n            this._nbResourceLoaders++;\n        }\n    }\n}\nexports.default = MultiResourceLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst simple_resource_loader_1 = __importDefault(require(\"./simple-resource-loader\"));\nclass CSSLoader extends simple_resource_loader_1.default {\n    constructor() {\n        super(...arguments);\n        this.doAppend = () => {\n            const style = document.createElement('style');\n            style.appendChild(document.createTextNode(this.responseData));\n            let head = document.head;\n            if (!head) {\n                head = document.createElement('head');\n                document.appendChild(head);\n            }\n            head.appendChild(style);\n        };\n    }\n}\nexports.default = CSSLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst simple_resource_loader_1 = __importDefault(require(\"./simple-resource-loader\"));\nclass JSLoader extends simple_resource_loader_1.default {\n    constructor() {\n        super(...arguments);\n        this.doAppend = () => {\n            const script = document.createElement('script');\n            script.type = 'text/javascript';\n            script.appendChild(document.createTextNode(this.responseData));\n            document.body.appendChild(script);\n        };\n    }\n}\nexports.default = JSLoader;\n"],"sourceRoot":""}