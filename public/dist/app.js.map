{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/js/lib/loader/simple-resource-loader.ts","webpack:///./src/js/starter.ts","webpack:///./src/js/lib/resources-loader.ts","webpack:///./src/js/lib/loader/index.ts","webpack:///./src/js/lib/loader/multi-resource-loader.ts","webpack:///./src/js/lib/loader/css-loader.ts","webpack:///./src/js/lib/loader/js-loader.ts"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","default","url","autoLoad","autoAppend","this","_xhr","_url","_listeners","_responseStatus","_responseTextStatus","_responseData","_status","_progress","isAppend","callbackDone","event","status","statusText","responseText","dispatch","callbackFail","callbackProgress","lengthComputable","Math","ceil","loaded","total","callbackAbort","load","push","abort","XMLHttpRequest","onprogress","onerror","onload","onabort","open","send","append","doAppend","__importDefault","mod","resourcesLoader","errorMessage","addResources","__ENV__","resources","loader_1","contentId","_elementInDom","_errorShown","_loader","MultiResourceLoader","_contentElement","document","getElementById","onUpdate","show","_progressBarElement","setAttribute","progress","error","done","_element","createElement","className","box","indicator","appendChild","resource","test","addResourceLoader","JSLoader","CSSLoader","SimpleResourceLoader","body","removeAttribute","removeChild","hide","createTextNode","simple_resource_loader_1","multi_resource_loader_1","css_loader_1","js_loader_1","_resourceLoaders","_nbResourceLoaders","resourceLoader","refreshStatus","refreshProgress","refreshNbResourceLoaders","datas","responseData","resourceLoadersByStatus","prevStatus","prevProgress","round","super","arguments","style","head","script","type"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,SACb,GAAqB,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,OACP,CACJ,IAAIK,EAAIL,IACR,IAAI,IAAIM,KAAKD,GAAuB,iBAAZJ,QAAuBA,QAAUF,GAAMO,GAAKD,EAAEC,IAPxE,CASGC,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUT,QAGnC,IAAIC,EAASM,EAAiBE,GAAY,CACzCJ,EAAGI,EACHC,GAAG,EACHV,QAAS,IAUV,OANAW,EAAQF,GAAUG,KAAKX,EAAOD,QAASC,EAAQA,EAAOD,QAASQ,GAG/DP,EAAOS,GAAI,EAGJT,EAAOD,QA0Df,OArDAQ,EAAoBK,EAAIF,EAGxBH,EAAoBM,EAAIP,EAGxBC,EAAoBO,EAAI,SAASf,EAASgB,EAAMC,GAC3CT,EAAoBU,EAAElB,EAASgB,IAClCG,OAAOC,eAAepB,EAASgB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhET,EAAoBe,EAAI,SAASvB,GACX,oBAAXwB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAepB,EAASwB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBO,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAASjC,GAChC,IAAIgB,EAAShB,GAAUA,EAAO4B,WAC7B,WAAwB,OAAO5B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAO,EAAoBO,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRT,EAAoBU,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG5B,EAAoB+B,EAAI,SAIjB/B,EAAoBA,EAAoBgC,EAAI,G,+BCjFrDrB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAgHtD1B,EAAQyC,QA/GR,MACI,YAAYC,EAAKC,GAAW,EAAMC,GAAa,GAC3CC,KAAKC,KAAO,KACZD,KAAKE,KAAO,GACZF,KAAKG,WAAa,GAClBH,KAAKI,gBAAkB,KACvBJ,KAAKK,oBAAsB,GAC3BL,KAAKM,cAAgB,KACrBN,KAAKO,QAAU,UACfP,KAAKQ,UAAY,EACjBR,KAAKS,UAAW,EAChBT,KAAKD,YAAa,EAClBC,KAAKU,aAAgBC,IACZX,KAAKC,OAGVD,KAAKI,gBAAkBJ,KAAKC,KAAKW,OACjCZ,KAAKK,oBAAsBL,KAAKC,KAAKY,WACrCb,KAAKM,cAAgBN,KAAKC,KAAKa,aAC/Bd,KAAKQ,UAAY,IACjBR,KAAKO,QAA+B,MAArBP,KAAKC,KAAKW,OAAiB,OAAS,QACnDZ,KAAKC,KAAO,KACZD,KAAKe,aAETf,KAAKgB,aAAgBL,IACZX,KAAKC,OAGVD,KAAKI,gBAAkBJ,KAAKC,KAAKW,OACjCZ,KAAKK,oBAAsBL,KAAKC,KAAKY,WACrCb,KAAKM,cAAgBN,KAAKC,KAAKa,aAC/Bd,KAAKQ,UAAY,IACjBR,KAAKO,QAAU,QACfP,KAAKC,KAAO,KACZD,KAAKe,aAETf,KAAKiB,iBAAoBN,IACjBA,EAAMO,mBACNlB,KAAKQ,UAAYW,KAAKC,KAAK,IAAMT,EAAMU,OAASV,EAAMW,QAE1DtB,KAAKe,YAETf,KAAKuB,cAAiBZ,IACbX,KAAKC,OAGVD,KAAKQ,UAAY,IACjBR,KAAKO,QAAU,WACfP,KAAKC,KAAO,KACZD,KAAKe,aAETf,KAAKE,KAAOL,EACZG,KAAKD,WAAaA,EACdD,GACAE,KAAKwB,OAGb,aACI,OAAOxB,KAAKO,QAEhB,eACI,OAAOP,KAAKQ,UAEhB,qBACI,OAAOR,KAAKI,gBAEhB,yBACI,OAAOJ,KAAKK,oBAEhB,mBACI,OAAOL,KAAKM,cAEhB,SAASrC,GACL+B,KAAKG,WAAWsB,KAAKxD,GAEzB,QACQ+B,KAAKC,MACLD,KAAKC,KAAKyB,QAGlB,OACI1B,KAAK0B,QACL1B,KAAKO,QAAU,UACfP,KAAKC,KAAO,IAAI0B,eAChB3B,KAAKC,KAAK2B,WAAa5B,KAAKiB,iBAC5BjB,KAAKC,KAAK4B,QAAU7B,KAAKgB,aACzBhB,KAAKC,KAAK6B,OAAS9B,KAAKU,aACxBV,KAAKC,KAAK8B,QAAU/B,KAAKuB,cACzBvB,KAAKC,KAAK+B,KAAK,MAAOhC,KAAKE,MAAM,GACjCF,KAAKC,KAAKgC,KAAK,MACfjC,KAAKe,WAET,WACI,IAAK,IAAI9C,KAAK+B,KAAKG,WACflC,EAAE+B,MAEFA,KAAKD,YAA8B,SAAhBC,KAAKY,QACxBZ,KAAKkC,SAGb,SACwB,SAAhBlC,KAAKY,QAAqBZ,KAAKS,WAGnCT,KAAKmC,WACLnC,KAAKS,UAAW,GAEpB,e,6BC5GJ,IAAI2B,EAAmBpC,MAAQA,KAAKoC,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIrD,WAAcqD,EAAM,CAAE,QAAWA,IAExD/D,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,EAAQ,GACR,MACMyD,EAAkB,IADGF,EAAgB,EAAQ,IACJxC,SAAQ,OACvD0C,EAAgBC,aAAe,UAC/BD,EAAgBE,aAAa/E,OAAOgF,QAAQC,Y,+CCR5CpE,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM8D,EAAW,EAAQ,GA0FzBxF,EAAQyC,QAzFR,MACI,YAAYgD,GACR5C,KAAK6C,eAAgB,EACrB7C,KAAK8C,aAAc,EACnB9C,KAAKuC,aAAe,KACpBvC,KAAK+C,QAAU,IAAIJ,EAASK,oBACxBJ,IACA5C,KAAKiD,gBAAkBC,SAASC,eAAeP,IAEnD5C,KAAK+C,QAAQK,SAAUvF,IACnBmC,KAAKqD,OACY,SAAbxF,EAAE+C,OAIgB,UAAb/C,EAAE+C,OAIXZ,KAAKsD,oBAAoBC,aAAa,QAAS,UAAU1F,EAAE2F,aAHvDxD,KAAKyD,QAJLzD,KAAK0D,SASb1D,KAAK2D,SAAWT,SAASU,cAAc,OACvC5D,KAAK2D,SAASE,UAAY,0BAC1B,MAAMC,EAAMZ,SAASU,cAAc,OACnCE,EAAID,UAAY,uBAChB,MAAME,EAAYb,SAASU,cAAc,OACzCG,EAAUF,UAAY,6BACtB,MAAML,EAAWN,SAASU,cAAc,OACxCJ,EAASK,UAAY,qCACrB7D,KAAKsD,oBAAsBJ,SAASU,cAAc,OAClD5D,KAAKsD,oBAAoBO,UAAY,0BACrC7D,KAAKsD,oBAAoBC,aAAa,QAAS,aAC/CC,EAASQ,YAAYhE,KAAKsD,qBAC1BS,EAAUC,YAAYR,GACtBM,EAAIE,YAAYD,GAChB/D,KAAK2D,SAASK,YAAYF,GAE9B,aAAapB,GACT,IAAK,IAAIvD,KAAOuD,EAAW,CACvB,IAAIuB,EAAWvB,EAAUvD,GACrB,QAAQ+E,KAAKD,GACbjE,KAAK+C,QAAQoB,kBAAkBhF,EAAK,IAAIwD,EAASyB,SAASH,GAAU,GAAO,IAEtE,SAASC,KAAKD,GACnBjE,KAAK+C,QAAQoB,kBAAkBhF,EAAK,IAAIwD,EAAS0B,UAAUJ,GAAU,GAAO,IAG5EjE,KAAK+C,QAAQoB,kBAAkBhF,EAAK,IAAIwD,EAAS2B,qBAAqBL,GAAU,GAAO,IAG/FjE,KAAK+C,QAAQvB,OAEjB,OACQxB,KAAK6C,gBAGL7C,KAAKiD,iBACLjD,KAAKiD,gBAAgBM,aAAa,QAAS,iBAE/CL,SAASqB,KAAKP,YAAYhE,KAAK2D,UAC/B3D,KAAK6C,eAAgB,GAEzB,OACS7C,KAAK6C,gBAGN7C,KAAKiD,iBACLjD,KAAKiD,gBAAgBuB,gBAAgB,SAEzCtB,SAASqB,KAAKE,YAAYzE,KAAK2D,UAC/B3D,KAAK6C,eAAgB,GAEzB,OACI7C,KAAK+C,QAAQb,SACblC,KAAK0E,OAET,QACQ1E,KAAK8C,cAGT9C,KAAKsD,oBAAoBC,aAAa,QAAS,eAC/CvD,KAAKsD,oBAAoBO,UAAY,yBACjC7D,KAAKuC,eACLvC,KAAK2D,SAASE,UAAY7D,KAAK2D,SAASE,UAAY,SACpD7D,KAAKsD,oBAAoBU,YAAYd,SAASyB,eAAe3E,KAAKuC,gBAEtEvC,KAAK8C,aAAc,M,6BCxF3B,IAAIV,EAAmBpC,MAAQA,KAAKoC,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIrD,WAAcqD,EAAM,CAAE,QAAWA,IAExD/D,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM+F,EAA2BxC,EAAgB,EAAQ,IACzDjF,EAAQmH,qBAAuBM,EAAyBhF,QACxD,MAAMiF,EAA0BzC,EAAgB,EAAQ,IACxDjF,EAAQ6F,oBAAsB6B,EAAwBjF,QACtD,MAAMkF,EAAe1C,EAAgB,EAAQ,IAC7CjF,EAAQkH,UAAYS,EAAalF,QACjC,MAAMmF,EAAc3C,EAAgB,EAAQ,IAC5CjF,EAAQiH,SAAWW,EAAYnF,S,6BCX/BtB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAyHtD1B,EAAQyC,QAxHR,MACI,cACII,KAAKgF,iBAAmB,GACxBhF,KAAKiF,mBAAqB,EAC1BjF,KAAKG,WAAa,GAClBH,KAAKO,QAAU,UACfP,KAAKQ,UAAY,EAErB,kBAAkBrB,EAAK+F,GACdlF,KAAKgF,iBAAiB7F,KACvBa,KAAKgF,iBAAiB7F,GAAO+F,EAC7BA,EAAe9B,SAAUvF,IACrBmC,KAAKmF,gBACLnF,KAAKoF,qBAGbpF,KAAKqF,2BAET,kBAAkBlG,GACd,OAAIa,KAAKgF,iBAAiB7F,GACfa,KAAKgF,iBAAiB7F,GAE1B,KAEX,SAASlB,GACL+B,KAAKG,WAAWsB,KAAKxD,GAEzB,aACI,OAAO+B,KAAKO,QAEhB,eACI,OAAOP,KAAKQ,UAEhB,mBACI,MAAM8E,EAAQ,GACd,IAAK,IAAInG,KAAOa,KAAKgF,iBACjBM,EAAMnG,GAAOa,KAAKgF,iBAAiB7F,GAAKoG,aAE5C,OAAOD,EAEX,QACI,IAAK,IAAInG,KAAOa,KAAKgF,iBACjBhF,KAAKgF,iBAAiB7F,GAAKuC,QAGnC,OACI,IAAK,IAAIvC,KAAOa,KAAKgF,iBACyB,SAAtChF,KAAKgF,iBAAiB7F,GAAKyB,QAC3BZ,KAAKgF,iBAAiB7F,GAAKqC,OAG9BxB,KAAKiF,qBACNjF,KAAKO,QAAU,OACfP,KAAKe,YAGb,SACI,IAAK,IAAI5B,KAAOa,KAAKgF,iBACjBhF,KAAKgF,iBAAiB7F,GAAK+C,SAGnC,WACI,IAAK,IAAIjE,KAAK+B,KAAKG,WACflC,EAAE+B,MAGV,gBACI,MAAMwF,EAA0B,CAC5B,QAAW,EACX,QAAW,EACX,SAAY,EACZ,MAAS,EACT,KAAQ,GAEZ,IAAK,IAAIrG,KAAOa,KAAKgF,iBACjBQ,EAAwBxF,KAAKgF,iBAAiB7F,GAAKyB,UAEvD,IAAI6E,EAAazF,KAAKO,QAClBiF,EAA+B,MAAI,EACnCxF,KAAKO,QAAU,QAEViF,EAA8B,OAAMxF,KAAKiF,mBAC9CjF,KAAKO,QAAU,OAEViF,EAAkC,WAAMxF,KAAKiF,mBAClDjF,KAAKO,QAAU,WAEViF,EAAiC,QAAI,EAC1CxF,KAAKO,QAAU,UAGfP,KAAKO,QAAU,UAEfkF,IAAezF,KAAKO,SACpBP,KAAKe,WAGb,kBACI,IAAI2E,EAAe1F,KAAKQ,UACxB,GAAKR,KAAKiF,mBAGL,CACD,IAAIzB,EAAW,EACf,IAAK,IAAIrE,KAAOa,KAAKgF,iBACjBxB,GAAYxD,KAAKgF,iBAAiB7F,GAAKqE,SAE3CxD,KAAKQ,UAAYW,KAAKwE,MAAMnC,EAAWxD,KAAKiF,yBAP5CjF,KAAKQ,UAAY,IASjBkF,IAAiB1F,KAAKQ,WACtBR,KAAKe,WAGb,2BACIf,KAAKiF,mBAAqB,EAC1B,IAAK,IAAI9F,KAAOa,KAAKgF,iBACjBhF,KAAKiF,wB,6BCrHjB,IAAI7C,EAAmBpC,MAAQA,KAAKoC,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIrD,WAAcqD,EAAM,CAAE,QAAWA,IAExD/D,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM+F,EAA2BxC,EAAgB,EAAQ,IACzD,MAAMiC,UAAkBO,EAAyBhF,QAC7C,cACIgG,SAASC,WACT7F,KAAKmC,SAAW,KACZ,MAAM2D,EAAQ5C,SAASU,cAAc,SACrCkC,EAAM9B,YAAYd,SAASyB,eAAe3E,KAAKuF,eAC/C,IAAIQ,EAAO7C,SAAS6C,KACfA,IACDA,EAAO7C,SAASU,cAAc,QAC9BV,SAASc,YAAY+B,IAEzBA,EAAK/B,YAAY8B,KAI7B3I,EAAQyC,QAAUyE,G,6BCpBlB,IAAIjC,EAAmBpC,MAAQA,KAAKoC,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIrD,WAAcqD,EAAM,CAAE,QAAWA,IAExD/D,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM+F,EAA2BxC,EAAgB,EAAQ,IACzD,MAAMgC,UAAiBQ,EAAyBhF,QAC5C,cACIgG,SAASC,WACT7F,KAAKmC,SAAW,KACZ,MAAM6D,EAAS9C,SAASU,cAAc,UACtCoC,EAAOC,KAAO,kBACdD,EAAOhC,YAAYd,SAASyB,eAAe3E,KAAKuF,eAChDrC,SAASqB,KAAKP,YAAYgC,KAItC7I,EAAQyC,QAAUwE","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SimpleResourceLoader {\n    constructor(url, autoLoad = true, autoAppend = true) {\n        this._xhr = null;\n        this._url = '';\n        this._listeners = [];\n        this._responseStatus = null;\n        this._responseTextStatus = '';\n        this._responseData = null;\n        this._status = 'waiting';\n        this._progress = 0;\n        this.isAppend = false;\n        this.autoAppend = true;\n        this.callbackDone = (event) => {\n            if (!this._xhr) {\n                return;\n            }\n            this._responseStatus = this._xhr.status;\n            this._responseTextStatus = this._xhr.statusText;\n            this._responseData = this._xhr.responseText;\n            this._progress = 100;\n            this._status = this._xhr.status === 200 ? 'done' : 'error';\n            this._xhr = null;\n            this.dispatch();\n        };\n        this.callbackFail = (event) => {\n            if (!this._xhr) {\n                return;\n            }\n            this._responseStatus = this._xhr.status;\n            this._responseTextStatus = this._xhr.statusText;\n            this._responseData = this._xhr.responseText;\n            this._progress = 100;\n            this._status = 'error';\n            this._xhr = null;\n            this.dispatch();\n        };\n        this.callbackProgress = (event) => {\n            if (event.lengthComputable) {\n                this._progress = Math.ceil(100 * event.loaded / event.total);\n            }\n            this.dispatch();\n        };\n        this.callbackAbort = (event) => {\n            if (!this._xhr) {\n                return;\n            }\n            this._progress = 100;\n            this._status = 'canceled';\n            this._xhr = null;\n            this.dispatch();\n        };\n        this._url = url;\n        this.autoAppend = autoAppend;\n        if (autoLoad) {\n            this.load();\n        }\n    }\n    get status() {\n        return this._status;\n    }\n    get progress() {\n        return this._progress;\n    }\n    get responseStatus() {\n        return this._responseStatus;\n    }\n    get responseTextStatus() {\n        return this._responseTextStatus;\n    }\n    get responseData() {\n        return this._responseData;\n    }\n    onUpdate(c) {\n        this._listeners.push(c);\n    }\n    abort() {\n        if (this._xhr) {\n            this._xhr.abort();\n        }\n    }\n    load() {\n        this.abort();\n        this._status = 'pending';\n        this._xhr = new XMLHttpRequest();\n        this._xhr.onprogress = this.callbackProgress;\n        this._xhr.onerror = this.callbackFail;\n        this._xhr.onload = this.callbackDone;\n        this._xhr.onabort = this.callbackAbort;\n        this._xhr.open('GET', this._url, true);\n        this._xhr.send(null);\n        this.dispatch();\n    }\n    dispatch() {\n        for (let c of this._listeners) {\n            c(this);\n        }\n        if (this.autoAppend && this.status === 'done') {\n            this.append();\n        }\n    }\n    append() {\n        if (this.status !== 'done' || this.isAppend) {\n            return;\n        }\n        this.doAppend();\n        this.isAppend = true;\n    }\n    doAppend() {\n        // Do nothing\n    }\n}\nexports.default = SimpleResourceLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire('../css/starter.scss');\nconst resources_loader_1 = __importDefault(require(\"./lib/resources-loader\"));\nconst resourcesLoader = new resources_loader_1.default('app');\nresourcesLoader.errorMessage = 'Oups...';\nresourcesLoader.addResources(window.__ENV__.resources);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst loader_1 = require(\"./loader\");\nclass ResourcesLoader {\n    constructor(contentId) {\n        this._elementInDom = false;\n        this._errorShown = false;\n        this.errorMessage = null;\n        this._loader = new loader_1.MultiResourceLoader();\n        if (contentId) {\n            this._contentElement = document.getElementById(contentId);\n        }\n        this._loader.onUpdate((l) => {\n            this.show();\n            if (l.status === 'done') {\n                this.done();\n                return;\n            }\n            else if (l.status === 'error') {\n                this.error();\n                return;\n            }\n            this._progressBarElement.setAttribute('style', `width: ${l.progress}%`);\n        });\n        this._element = document.createElement('div');\n        this._element.className = 'resources-loader-layout';\n        const box = document.createElement('div');\n        box.className = 'resources-loader-box';\n        const indicator = document.createElement('div');\n        indicator.className = 'resources-loader-indicator';\n        const progress = document.createElement('div');\n        progress.className = 'progress resources-loader-progress';\n        this._progressBarElement = document.createElement('div');\n        this._progressBarElement.className = 'progress-bar bg-primary';\n        this._progressBarElement.setAttribute('style', 'width: 0%');\n        progress.appendChild(this._progressBarElement);\n        indicator.appendChild(progress);\n        box.appendChild(indicator);\n        this._element.appendChild(box);\n    }\n    addResources(resources) {\n        for (let key in resources) {\n            let resource = resources[key];\n            if (/\\.js$/.test(resource)) {\n                this._loader.addResourceLoader(key, new loader_1.JSLoader(resource, false, false));\n            }\n            else if (/\\.css$/.test(resource)) {\n                this._loader.addResourceLoader(key, new loader_1.CSSLoader(resource, false, false));\n            }\n            else {\n                this._loader.addResourceLoader(key, new loader_1.SimpleResourceLoader(resource, false, false));\n            }\n        }\n        this._loader.load();\n    }\n    show() {\n        if (this._elementInDom) {\n            return;\n        }\n        if (this._contentElement) {\n            this._contentElement.setAttribute('style', 'display: none');\n        }\n        document.body.appendChild(this._element);\n        this._elementInDom = true;\n    }\n    hide() {\n        if (!this._elementInDom) {\n            return;\n        }\n        if (this._contentElement) {\n            this._contentElement.removeAttribute('style');\n        }\n        document.body.removeChild(this._element);\n        this._elementInDom = false;\n    }\n    done() {\n        this._loader.append();\n        this.hide();\n    }\n    error() {\n        if (this._errorShown) {\n            return;\n        }\n        this._progressBarElement.setAttribute('style', 'width: 100%');\n        this._progressBarElement.className = 'progress-bar bg-danger';\n        if (this.errorMessage) {\n            this._element.className = this._element.className + ' error';\n            this._progressBarElement.appendChild(document.createTextNode(this.errorMessage));\n        }\n        this._errorShown = true;\n    }\n}\nexports.default = ResourcesLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst simple_resource_loader_1 = __importDefault(require(\"./simple-resource-loader\"));\nexports.SimpleResourceLoader = simple_resource_loader_1.default;\nconst multi_resource_loader_1 = __importDefault(require(\"./multi-resource-loader\"));\nexports.MultiResourceLoader = multi_resource_loader_1.default;\nconst css_loader_1 = __importDefault(require(\"./css-loader\"));\nexports.CSSLoader = css_loader_1.default;\nconst js_loader_1 = __importDefault(require(\"./js-loader\"));\nexports.JSLoader = js_loader_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MultiResourceLoader {\n    constructor() {\n        this._resourceLoaders = {};\n        this._nbResourceLoaders = 0;\n        this._listeners = [];\n        this._status = 'waiting';\n        this._progress = 0;\n    }\n    addResourceLoader(key, resourceLoader) {\n        if (!this._resourceLoaders[key]) {\n            this._resourceLoaders[key] = resourceLoader;\n            resourceLoader.onUpdate((l) => {\n                this.refreshStatus();\n                this.refreshProgress();\n            });\n        }\n        this.refreshNbResourceLoaders();\n    }\n    getResourceLoader(key) {\n        if (this._resourceLoaders[key]) {\n            return this._resourceLoaders[key];\n        }\n        return null;\n    }\n    onUpdate(c) {\n        this._listeners.push(c);\n    }\n    get status() {\n        return this._status;\n    }\n    get progress() {\n        return this._progress;\n    }\n    get responseData() {\n        const datas = {};\n        for (let key in this._resourceLoaders) {\n            datas[key] = this._resourceLoaders[key].responseData;\n        }\n        return datas;\n    }\n    abort() {\n        for (let key in this._resourceLoaders) {\n            this._resourceLoaders[key].abort();\n        }\n    }\n    load() {\n        for (let key in this._resourceLoaders) {\n            if (this._resourceLoaders[key].status !== 'done') {\n                this._resourceLoaders[key].load();\n            }\n        }\n        if (!this._nbResourceLoaders) {\n            this._status = 'done';\n            this.dispatch();\n        }\n    }\n    append() {\n        for (let key in this._resourceLoaders) {\n            this._resourceLoaders[key].append();\n        }\n    }\n    dispatch() {\n        for (let c of this._listeners) {\n            c(this);\n        }\n    }\n    refreshStatus() {\n        const resourceLoadersByStatus = {\n            'waiting': 0,\n            'pending': 0,\n            'canceled': 0,\n            'error': 0,\n            'done': 0\n        };\n        for (let key in this._resourceLoaders) {\n            resourceLoadersByStatus[this._resourceLoaders[key].status]++;\n        }\n        let prevStatus = this._status;\n        if (resourceLoadersByStatus['error'] > 0) {\n            this._status = 'error';\n        }\n        else if (resourceLoadersByStatus['done'] === this._nbResourceLoaders) {\n            this._status = 'done';\n        }\n        else if (resourceLoadersByStatus['canceled'] === this._nbResourceLoaders) {\n            this._status = 'canceled';\n        }\n        else if (resourceLoadersByStatus['pending'] > 0) {\n            this._status = 'pending';\n        }\n        else {\n            this._status = 'waiting';\n        }\n        if (prevStatus !== this._status) {\n            this.dispatch();\n        }\n    }\n    refreshProgress() {\n        let prevProgress = this._progress;\n        if (!this._nbResourceLoaders) {\n            this._progress = 100;\n        }\n        else {\n            let progress = 0;\n            for (let key in this._resourceLoaders) {\n                progress += this._resourceLoaders[key].progress;\n            }\n            this._progress = Math.round(progress / this._nbResourceLoaders);\n        }\n        if (prevProgress !== this._progress) {\n            this.dispatch();\n        }\n    }\n    refreshNbResourceLoaders() {\n        this._nbResourceLoaders = 0;\n        for (let key in this._resourceLoaders) {\n            this._nbResourceLoaders++;\n        }\n    }\n}\nexports.default = MultiResourceLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst simple_resource_loader_1 = __importDefault(require(\"./simple-resource-loader\"));\nclass CSSLoader extends simple_resource_loader_1.default {\n    constructor() {\n        super(...arguments);\n        this.doAppend = () => {\n            const style = document.createElement('style');\n            style.appendChild(document.createTextNode(this.responseData));\n            let head = document.head;\n            if (!head) {\n                head = document.createElement('head');\n                document.appendChild(head);\n            }\n            head.appendChild(style);\n        };\n    }\n}\nexports.default = CSSLoader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst simple_resource_loader_1 = __importDefault(require(\"./simple-resource-loader\"));\nclass JSLoader extends simple_resource_loader_1.default {\n    constructor() {\n        super(...arguments);\n        this.doAppend = () => {\n            const script = document.createElement('script');\n            script.type = 'text/javascript';\n            script.appendChild(document.createTextNode(this.responseData));\n            document.body.appendChild(script);\n        };\n    }\n}\nexports.default = JSLoader;\n"],"sourceRoot":""}